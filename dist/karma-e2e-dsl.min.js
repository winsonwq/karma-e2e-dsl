/*! karma-e2e-dsl - v0.2.0 - 2013-12-19 */!function(a,b,c,d){"use strict";function e(a,c){var d=b.Deferred(),f=c||0,g=a[f],h=[].slice.call(arguments,2);return g?g.apply(g,h).then(function(){var b=[].slice.call(arguments);e.apply(this,[a,++f].concat(b))}):d.resolve(),d.promise()}function f(a){var b=a.split("/");return b[b.length-1]}function g(a){var b=f(a);return a.substring(0,a.length-b.length)}function h(){for(var a="",b=!1,c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:"/";"string"==typeof d&&d&&(a=d+"/"+a,b="/"===d.charAt(0))}return a=a.replace(/\/\//g,"/"),"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a}function i(a){return function(){var c=b.Deferred();return c.then(a),c.resolve(),c.promise()}}function j(a,b){return"undefined"!=typeof b&&(a.loadedDone&&a.pop(),a.push(i(b)),a.loadedDone=!0),a}function k(a){return function(b){S=[],a(),j(S,b),0==T&&e(S)}}function l(){return b(R.prop("contentDocument"))}function m(){return b(R.prop("contentWindow"))}function n(a){return F(function(b){R.one("load",function(){b.resolve()}),R.attr("src",a)})}function o(){return F(function(a){R.one("load",function(){a.resolve()}),m().prop("location").reload()})}function p(a,b){return F(function(c){c.done(b),c.resolve(m().prop("location")[a])})}function q(a,b){T++,setTimeout(function(){var b=S.pop();a(),S.push(b),0==--T&&e(S)},b)}function r(a){return F(function(b){var c=s(arguments);setTimeout(function(){b.resolve.apply(b,c)},a)})}function s(a){return[].slice.call(a,1)}function t(){return F(function(a){var b=s(arguments);R.one("load",function(){a.resolve.apply(a,b)})})}function u(a){return function(){var c=b.Deferred();return c.resolve(l().find(a)),c.promise()}}function v(a){return this&&this.constructor==v?(S.push(u(a)),void 0):new v(a)}function w(a,c,d){return function(e){var f=b.Deferred(),g=typeof d;return"undefined"!==g&&"function"!==g?(a(e),f.resolve(e)):(f.then(d),f.resolve(c(e))),f.promise()}}function x(a,b,c){return w(function(d){d[a](b,c)},function(c){return c[a](b)},c)}function y(a,b){return x("attr",a,b)}function z(a,b){return x("prop",a,b)}function A(a,b){return w(function(c){c[a](b)},function(b){return b[a]()},b)}function B(a){return w(function(c){a.length!==d?a:[a];c.find("option").each(function(){-1!=a.indexOf(b(this).val())&&b(this).prop("selected",!0)})},function(a){var c=[];return a.find("option:selected").each(function(){c.push(b(this).val())}),c.length>1?c:c[0]},a)}function C(a){return F(function(b,c){b.then(a),b.resolve(c)})}function D(a){return"undefined"==typeof a?z("checked",!0):F(function(c,d){d.each(function(c,d){b(d).val()==a&&b(d).prop("checked",!0)}),c.resolve()})}function E(a){return function(c){if("A"===c.prop("tagName")&&"click"===a){var d=m().prop("location").pathname,e=h(g(d),c.attr("href"));return n(e)()}var f=b.Deferred();return c.trigger(a),f.resolve(),f.promise()}}function F(a){return function(){var c=b.Deferred();return a&&a.apply(this,[c].concat([].slice.call(arguments))),c.promise()}}function G(a){return this&&this.constructor==G?(S.push(F(function(a,b){a.resolve(b,!0)})),void 0):new G(a)}function H(){return F(function(a,b,c){a.resolve(b,!c)})}function I(a,b,c){return F(function(d,e,f){d.resolve(a,e,b,f,f===c(e,b))})}function J(a){if(P(a))return"'"+a+"'";if(b.isArray(a)){var c="";return b(a).each(function(a,b){c+=J(b)+", "}),c=c.substring(0,c.length-2),"["+c+"]"}return a}function K(a){return a?"":" not"}function L(a,b,c,d){var e="AssertError: ";switch(a){case"toEqual":e+="expect "+J(b)+K(d)+" to equal "+J(c);break;case"toBe":e+="expect "+J(b)+K(d)+" to be "+J(c);break;case"toBeDefined":e+="expect "+J(b)+K(d)+" to be defined.";break;case"toContain":e+="expect "+J(b)+K(d)+" to contain "+J(c);break;case"toMatch":e+="expect "+J(b)+K(d)+" to match "+J(c);break;case"toBeLessThan":e+="expect "+J(b)+K(d)+" to be less than "+J(c);break;case"toBeGreaterThan":e+="expect "+J(b)+K(d)+" to be greater than "+J(c)}return e}function M(){return F(function(a,b,c,d,e,f){if(f===!1)throw L(b,c,d,e);a.resolve()})}function N(a,b){return c?c.isEqual(a,b):void 0}function O(a,b,c){S.push(I(a,b,c)),S.push(M())}function P(a){return"[object String]"==={}.toString.call(a)}function Q(a,c){return P(a)?a.indexOf(c)>=0:b.isArray(a)?b.inArray(c,a)>=0:!1}document.write('<iframe id="context" width="100%" height="500px" src="about:blank"></iframe>');var R=b("#context"),S=[],T=0,U=null,V={navigateTo:function(a){S.push(n(a))},reload:function(){S.push(o())},delay:function(a,b){q(a,b)},sleep:function(a){S.push(r(a))},pause:function(){S.push(function(){return U=b.Deferred(),U.promise()})},resume:function(){U.resolve(),U=null},waitForPageLoad:function(){S.push(t())},window:{path:function(a){S.push(p("pathname",a))},href:function(a){S.push(p("href",a))},hash:function(a){S.push(p("hash",a))},search:function(a){S.push(p("search",a))}}},W={constructor:v,enter:function(a){S.push(y("value",a))},check:function(){S.push(z("checked",!0))},uncheck:function(){S.push(z("checked",!1))},select:function(a){S.push(D(a))},click:function(){S.push(E("click"))},isChecked:function(a){S.push(z("checked",a))},isSelected:function(a){S.push(z("checked",a))},isDisabled:function(a){S.push(z("disabled",a))},option:function(a){S.push(B(a))},options:function(){var a=[].slice.call(arguments);S.push(B(a.length>1?a:a[0]))},query:function(a){S.push(C(a))}};b(["attr","prop","css"]).each(function(a,b){W[b]=function(a,c){S.push(x(b,a,c))}}),b(["val","text","count#size","html","height","innerHeight","outerHeight","width","innerWidth","outerWidth","position","scrollLeft","scrollTop","offset"]).each(function(a,b){var c=b.split("#");W[c[0]]=function(a){S.push(A(c[1]||c[0],a))}}),v.prototype=W;var X={constructor:G,toEqual:function(a){O("toEqual",a,N)},toBe:function(a){O("toBe",a,function(a,b){return a===b})},toBeTruthy:function(){this.toBe(!0)},toBeFalsy:function(){this.toBe(!1)},toBeNull:function(){this.toBe(null)},toBeDefined:function(){O("toBeDefined",d,function(a){return"undefined"!=typeof a})},toContain:function(a){O("toContain",a,function(a,b){return Q(a,b)})},toMatch:function(a){O("toMatch",a,function(a,b){return new RegExp(b).test(a)})},toBeLessThan:function(a){O("toBeLessThan",a,function(a,b){return b>a})},toBeGreaterThan:function(a){O("toBeGreaterThan",a,function(a,b){return a>b})},not:function(){return S.push(H()),this}};G.prototype=X,a.browser=V,a.dsl=k,a.dropdownlist=a.input=a.element=v,a.expect=G}(this,jQuery,_);