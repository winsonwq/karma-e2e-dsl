/*! karma-e2e-dsl - v0.3.0 - 2015-01-28 */!function(a,b,c,d,e){"use strict";function f(a){return function(){var c=b.Deferred();return a&&a.apply(this,[c].concat([].slice.call(arguments))),c.promise()}}function g(a,c){var d=b.Deferred(),e=c||0,f=a[e],h=[].slice.call(arguments,2);return f?f.apply(f,h).then(function(){var b=[].slice.call(arguments);g.apply(this,[a,++e].concat(b))}):d.resolve(),d.promise()}function h(a){var b=a.split("/");return b[b.length-1]}function i(a){var b=h(a);return a.substring(0,a.length-b.length)}function j(){for(var a="",b=!1,c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:"/";"string"==typeof d&&d&&(a=d+"/"+a,b="/"===d.charAt(0))}return a=a.replace(/\/\//g,"/"),"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a}function k(a){return function(){var c=b.Deferred();return c.then(a),c.resolve(),c.promise()}}function l(a,b){return"undefined"!=typeof b&&(a.loadedDone&&a.pop(),a.push(k(b)),a.loadedDone=!0),a}function m(a){return function(b){I=[],a(),l(I,b),0==J&&g(I)}}function n(){return b(H.prop("contentDocument"))}function o(){return b(H.prop("contentWindow"))}function p(a){return f(function(b){H.one("load",function(){b.resolve()}),H.attr("src",a)})}function q(){return f(function(a){H.one("load",function(){a.resolve()}),o().prop("location").reload()})}function r(a,b){return f(function(c){c.done(b),c.resolve(o().prop("location")[a])})}function s(a,b){J++,setTimeout(function(){var b=I.pop();a(),I.push(b),0==--J&&g(I)},b)}function t(a){return f(function(b){var c=u(arguments);setTimeout(function(){b.resolve.apply(b,c)},a)})}function u(a){return[].slice.call(a,1)}function v(){return f(function(a){var b=u(arguments);H.one("load",function(){a.resolve.apply(a,b)})})}function w(a){return function(){var c=b.Deferred();return c.resolve(n().find(a)),c.promise()}}function x(a){return this&&this.constructor==x?void I.push(w(a)):new x(a)}function y(a,c,d){return function(e){var f=b.Deferred(),g=typeof d;return"undefined"!==g&&"function"!==g?(a(e),f.resolve(e)):(f.then(d),f.resolve(c(e))),f.promise()}}function z(a,b,c){return y(function(d){d[a](b,c)},function(c){return c[a](b)},c)}function A(a,b){return z("attr",a,b)}function B(a,b){return z("prop",a,b)}function C(a,b){return y(function(c){c[a](b)},function(b){return b[a]()},b)}function D(a){return y(function(c){a.length!==e?a:[a];c.find("option").each(function(){-1!=a.indexOf(b(this).val())&&b(this).prop("selected",!0)})},function(a){var c=[];return a.find("option:selected").each(function(){c.push(b(this).val())}),c.length>1?c:c[0]},a)}function E(a){return f(function(b,c){b.then(a),b.resolve(c)})}function F(a){return"undefined"==typeof a?B("checked",!0):f(function(c,d){d.each(function(c,d){b(d).val()==a&&b(d).prop("checked",!0)}),c.resolve()})}function G(a){return function(c){if("A"===c.prop("tagName")&&"click"===a){var d=o().prop("location").pathname,e=j(i(d),c.attr("href"));return p(e)()}var f=b.Deferred();return c.trigger(a),f.resolve(),f.promise()}}document.write('<iframe id="context" width="100%" height="500px" src="about:blank"></iframe>');var H=b("#context"),I=[],J=0,K=null,L={navigateTo:function(a){I.push(p(a))},reload:function(){I.push(q())},delay:function(a,b){s(a,b)},sleep:function(a){I.push(t(a))},pause:function(){I.push(function(){return K=b.Deferred(),K.promise()})},resume:function(){K.resolve(),K=null},waitForPageLoad:function(){I.push(v())},window:{path:function(a){I.push(r("pathname",a))},href:function(a){I.push(r("href",a))},hash:function(a){I.push(r("hash",a))},search:function(a){I.push(r("search",a))}}},M={constructor:x,enter:function(a){I.push(A("value",a))},check:function(){I.push(B("checked",!0))},uncheck:function(){I.push(B("checked",!1))},select:function(a){I.push(F(a))},click:function(){I.push(G("click"))},isChecked:function(a){I.push(B("checked",a))},isSelected:function(a){I.push(B("checked",a))},isDisabled:function(a){I.push(B("disabled",a))},option:function(a){I.push(D(a))},options:function(){var a=[].slice.call(arguments);I.push(D(a.length>1?a:a[0]))},query:function(a){I.push(E(a))}};b(["attr","prop","css"]).each(function(a,b){M[b]=function(a,c){I.push(z(b,a,c))}}),b(["val","text","count#size","html","height","innerHeight","outerHeight","width","innerWidth","outerWidth","position","scrollLeft","scrollTop","offset"]).each(function(a,b){var c=b.split("#");M[c[0]]=function(a){I.push(C(c[1]||c[0],a))}}),x.prototype=M,a.browser=L,a.dsl=m,a.dropdownlist=a.input=a.element=x,"undefined"!=typeof a.chai?(a.expect=a.chai.expect,a.should=a.chai.should,a.assert=a.chai.assert):"undefined"==typeof a.expect&&(a.expect=d)}(this,jQuery,_,expectations,void 0);